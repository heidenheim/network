
# VRF(Virtual Routing and Forwarding) 虚拟路由和转发

又称 VPN 实例, 是 MPLS VPN 架构中的关键技术, 每个 VPN 实例使用独立的路由转发表项, 实现 VPN 之间的逻辑隔离

![](../image/MPLS/VRF/02112500.png)


![](../image/MPLS/VRF/02112501.png)


```
PE1(config)#ip vrf VPNA
PE1(config-vrf)#rd 10000:1

PE1(config)#ip vrf VPNB
PE1(config-vrf)#rd 10000:3

PE1(config)#interface e0/1
PE1(config-if)#ip vrf forwarding VPNA
PE1(config-if)#ip address 172.16.1.1 255.255.255.252

PE1(config)#interface e0/2
PE1(config-if)#ip vrf forwarding VPNB
PE1(config-if)#ip address 172.16.2.1 255.255.255.252

PE1(config)#router bgp 10000
PE1(config-router)#bgp router-id 1.1.1.1
PE1(config-router)#no bgp default ipv4-unicast

PE1(config-router)#address-family ipv4 vrf VPNA
PE1(config-router-af)#neighbor 172.16.1.2 remote-as 65001

PE1(config-router)#address-family ipv4 vrf VPNB
PE1(config-router-af)#neighbor 172.16.2.2 remote-as 65003
```