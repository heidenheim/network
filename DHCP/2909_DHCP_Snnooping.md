# DHCP Snooping(DHCP 嗅探)

在二层网络攻击中，有一种方法就是DHCP欺骗攻击。以及在实际网络中可能不止一个DHCP服务器，也有网络故障原因是因为私接AP、路由等等产生流氓 DHCP，综上所以部署 DHCP 嗅探来避免这些问题。

DHCP嗅探一般部署在接入交换机上，因为DHCP类的攻击往往出现在接入层面.

DHCP嗅探实现非常简单，在DHCP服务器和DHCP客户端之间增加了一个所谓的“防火墙”，默认禁用所有DHCP报文，设置信任端口，默认所以端口为 untrust 防止流氓 DHCP。

默认情况下，接入交换机所有的端口开启DHCP嗅探后，**默认是 DHCP 嗅探的 untrust 端口**，只有朝向 DHCP 服务器的正确端口手工修改为信任端口后，交换机才可以转发收到 DHCP 报文。

首先切记必须一定要打开 DHCP 嗅探功能，不然后面所有配置都是白费时间。

192.168.10.254 为 vlan 10 的 DHCP Server

192.168.20.254 为 vlan 20 的 DHCP Server

配置过程在 [text](130925_DHCP_relay.md) 已有, 不再赘述.

